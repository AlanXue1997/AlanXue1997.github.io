<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Java实现Tupper自我指涉公式的计算</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@XueZhonghao" /><meta name="twitter:title" content="Java实现Tupper自我指涉公式的计算" /><meta name="twitter:description" content=""><meta name="description" content=""><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="shortcut icon" href="/assets/totora.png"> <!--<link rel="icon" href="/assets/totora.png">--><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link rel="stylesheet" href="/assets/prism.css"><link rel="canonical" href="/notes/Java-tupper"><link rel="alternate" type="application/atom+xml" title="AlanXue's blog" href="/feed.xml" /></head><body><aside class="logo"> <a href="/"> <img src="http://www.gravatar.com/avatar/742cf6353760888dd24b7f22843cca55.png?s=80" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>Java实现Tupper自我指涉公式的计算</h1><time>March 11, 2016</time></div><div class="divider"></div><script src="/assets/prism.js"></script><h2 id="tupper">Tupper自我指涉公式</h2><p>最早是在Matrix67的《思考的乐趣》中知道了Tupper自我指涉公式。当时的感觉仅仅是挺神奇的。后来逛Matrix67的博客时，无意间看见的他关于此公式的<a href="http://www.matrix67.com/blog/archives/301">博文</a>，发现了这句话：</p><blockquote><p><strong><em>你甚至可以告诉你的MM，说你发现了一个函数，函数在某个位置的图象正好是某某某我爱你的字样。</em></strong></p></blockquote><p>一语惊醒梦中人啊，这句话让我大受启发，此公式的作用远不止自指涉那一个用途啊。</p><div class="divider"></div><h2 id="section">尝试</h2><p>高中时候晚上一到家就不想学习，那天实在没事干了，就想起了这个公式，要不我也算一个n？想了半天，实在没啥好词，那就写“九班加油”好了。</p><p>以下是步骤：</p><p>一、先要整出那种像素很少的图片：</p><p><img src="/assets/tupper1.png" /></p><p><em>方法很简单，百度“像素字+在线”即可找到相应工具。</em></p><p>二、将这些字的像素转换成二进制码，顺序就是从上到下，从左到右，先列后行。 （太过久远，当时转换的找不到了）</p><p>三、然后把二进制码当成一个二进制数，转换成十进制数。当时是用Python算的，毕竟高中一直拿Python当计算器用。</p><p>四、到第三步已经可以算完成了，但我当时还想要一个更漂亮的图象，于是自己又画了一个（微软自带画图，用橡皮画的）。</p><p>最终效果如下：</p><p><img src="/assets/tupper2.jpg" /></p><p><img src="/assets/tupper3.jpg" /></p><p><img src="/assets/tupper4.png" /></p><p>这次效果还不错，但太费时间了，做完之后心力憔悴，几年都不想碰这个公式。</p><div class="divider"></div><h2 id="java">Java实现</h2><p>懒惰(Laziness)是优秀程序员的三大美德之一。所以当这几天又想到Tupper的公式时，我想不能这样下去了，我要一劳永逸的解决这个问题。嗯，编程实现。</p><p>方法跟上面半手工的方法是一样的，这学期在学java，所以就用java写了一个，可以实现字符串向图像/n值得转换，以及n值向图像的转换：</p><div class="highlighter-rouge"><pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.geom.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.font.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.image.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.imageio.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Tupper</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

      <span class="n">Scanner</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>

      <span class="c1">//选择文字转图象（n值），或n值转图象</span>
      <span class="n">String</span> <span class="n">st</span><span class="o">;</span> <span class="kt">char</span> <span class="n">ch</span> <span class="o">=</span> <span class="sc">' '</span><span class="o">;</span>
      <span class="k">while</span><span class="o">(</span><span class="n">ch</span> <span class="o">!=</span> <span class="sc">'A'</span> <span class="o">&amp;&amp;</span> <span class="n">ch</span> <span class="o">!=</span> <span class="sc">'B'</span><span class="o">){</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"(a)文字 -&gt; 图象/n值\n(b)n值 -&gt; 图象\n请输入a或b："</span><span class="o">);</span>
	<span class="n">st</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
	<span class="n">st</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">();</span>
	<span class="n">ch</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
      <span class="o">}</span>
     
      <span class="c1">//输入相应参数</span>
      <span class="k">if</span><span class="o">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">'A'</span><span class="o">){</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"输入一个字符串："</span><span class="o">);</span>
	<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"输入图片的行数："</span><span class="o">);</span>
	<span class="kt">int</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"输入图片的名称："</span><span class="o">);</span>
	<span class="n">in</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
	<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s">".png"</span><span class="o">;</span>
	<span class="n">BigInteger</span> <span class="n">number</span> <span class="o">=</span> <span class="n">createImage</span><span class="o">(</span><span class="n">content</span><span class="o">,</span> <span class="n">lines</span><span class="o">,</span> <span class="k">new</span> <span class="n">Font</span><span class="o">(</span><span class="s">"黑体"</span><span class="o">,</span> <span class="n">Font</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span> <span class="mi">72</span><span class="o">));</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"n = "</span> <span class="o">+</span> <span class="n">number</span><span class="o">);</span>
	<span class="n">translateImage</span><span class="o">(</span><span class="n">lines</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="n">number</span><span class="o">,</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"输入行数："</span><span class="o">);</span>
	<span class="kt">int</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"输入n值："</span><span class="o">);</span>
	<span class="n">BigInteger</span> <span class="n">number</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextBigInteger</span><span class="o">();</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"输入图片的名称："</span><span class="o">);</span>
	<span class="n">in</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
	<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s">".png"</span><span class="o">;</span>
	<span class="n">translateImage</span><span class="o">(</span><span class="n">lines</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="n">number</span><span class="o">,</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>
      <span class="o">}</span> 
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">translateImage</span><span class="o">(</span><span class="kt">int</span> <span class="n">lines</span><span class="o">,</span> <span class="kt">int</span> <span class="n">side</span><span class="o">,</span> <span class="n">BigInteger</span> <span class="n">number</span><span class="o">,</span> <span class="n">File</span> <span class="n">outFile</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

      <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lines</span><span class="o">));</span>

      <span class="c1">//判断所需要的列数</span>
      <span class="n">BigInteger</span> <span class="n">x</span> <span class="o">=</span> <span class="n">number</span><span class="o">;</span>
      <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">){</span>
	<span class="n">k</span><span class="o">++;</span>
	<span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">/</span><span class="n">lines</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>

      <span class="c1">//计算图片的长宽</span>
      <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="o">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="n">side</span><span class="o">;</span>
      <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="o">(</span><span class="n">lines</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="n">side</span><span class="o">;</span>

      <span class="c1">//创建图片</span>
      <span class="n">BufferedImage</span> <span class="n">image</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedImage</span><span class="o">(</span><span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">,</span> <span class="n">BufferedImage</span><span class="o">.</span><span class="na">TYPE_INT_BGR</span><span class="o">);</span>
      <span class="n">Graphics</span> <span class="n">g</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="na">getGraphics</span><span class="o">();</span>
      <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">WHITE</span><span class="o">);</span>
      <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span><span class="c1">//背景色</span>

      <span class="c1">//绘制图象</span>
      <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">black</span><span class="o">);</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">k</span><span class="o">;</span> <span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">;</span> <span class="o">--</span><span class="n">rank</span><span class="o">)</span>
	<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">line</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">line</span> <span class="o">&lt;=</span> <span class="n">lines</span><span class="o">;</span> <span class="o">++</span><span class="n">line</span><span class="o">){</span>
	  <span class="k">if</span><span class="o">(</span><span class="n">number</span><span class="o">.</span><span class="na">mod</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">2</span><span class="o">)).</span><span class="na">compareTo</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
	    <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="n">rank</span> <span class="o">*</span> <span class="n">side</span><span class="o">,</span> <span class="n">line</span> <span class="o">*</span> <span class="n">side</span><span class="o">,</span> <span class="n">side</span><span class="o">,</span> <span class="n">side</span><span class="o">);</span>
	  <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
	<span class="o">}</span>

      <span class="n">g</span><span class="o">.</span><span class="na">dispose</span><span class="o">();</span>
      <span class="n">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="s">"png"</span><span class="o">,</span> <span class="n">outFile</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">//&lt;根据str,font的样式以及输出文件目录&gt;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">BigInteger</span> <span class="n">createImage</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lines</span><span class="o">,</span> <span class="n">Font</span> <span class="n">font</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>

      <span class="c1">//&lt;获取font的样式应用在str上的整个矩形&gt;</span>
      <span class="n">Rectangle2D</span> <span class="n">r</span><span class="o">=</span><span class="n">font</span><span class="o">.</span><span class="na">getStringBounds</span><span class="o">(</span><span class="n">str</span><span class="o">,</span> <span class="k">new</span> <span class="n">FontRenderContext</span><span class="o">(</span><span class="n">AffineTransform</span><span class="o">.</span><span class="na">getScaleInstance</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span><span class="kc">false</span><span class="o">,</span><span class="kc">false</span><span class="o">));</span>

      <span class="kt">int</span> <span class="n">unitHeight</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">getHeight</span><span class="o">());</span><span class="c1">//&lt;获取单个字符的高度&gt;</span>

      <span class="c1">//&lt;获取整个str用了font样式的宽度这里用四舍五入后+1保证宽度绝对能容纳这个字符串作为图片的宽度&gt;</span>
      <span class="kt">int</span> <span class="n">width</span><span class="o">=(</span><span class="kt">int</span><span class="o">)</span><span class="n">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">getWidth</span><span class="o">())+</span><span class="mi">1</span><span class="o">;</span>
      <span class="kt">int</span> <span class="n">height</span><span class="o">=</span><span class="n">unitHeight</span><span class="o">;</span><span class="c1">//&lt;把单个字符的高度+3保证高度绝对能容纳字符串作为图片的高度&gt;</span>
      <span class="c1">//&lt;创建图片&gt;</span>
      <span class="n">BufferedImage</span> <span class="n">image</span><span class="o">=</span><span class="k">new</span> <span class="n">BufferedImage</span><span class="o">(</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">,</span><span class="n">BufferedImage</span><span class="o">.</span><span class="na">TYPE_INT_BGR</span><span class="o">);</span>
      <span class="n">Graphics</span> <span class="n">g</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="na">getGraphics</span><span class="o">();</span>
      <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">WHITE</span><span class="o">);</span>
      <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span><span class="c1">//&lt;先用白色填充整张图片,也就是背景&gt;</span>
      <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">black</span><span class="o">);</span><span class="c1">//&lt;在换成黑色&gt;</span>
      <span class="n">g</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="n">font</span><span class="o">);</span><span class="c1">//&lt;设置画笔字体&gt;</span>
      <span class="n">g</span><span class="o">.</span><span class="na">drawString</span><span class="o">(</span><span class="n">str</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">font</span><span class="o">.</span><span class="na">getSize</span><span class="o">());</span><span class="c1">//&lt;画出字符串&gt;</span>
      <span class="kt">int</span> <span class="n">ranks</span> <span class="o">=</span> <span class="n">width</span> <span class="o">/</span> <span class="o">(</span><span class="n">height</span> <span class="o">/</span> <span class="n">lines</span><span class="o">);</span>

      <span class="c1">//生成n值</span>
      <span class="n">BigInteger</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
      <span class="n">BigInteger</span> <span class="n">k</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">ranks</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">rank</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">;</span> <span class="o">--</span><span class="n">rank</span><span class="o">){</span>
	<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">line</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">line</span> <span class="o">&lt;</span> <span class="n">lines</span><span class="o">;</span> <span class="o">++</span><span class="n">line</span><span class="o">){</span>
	  <span class="c1">//判断一格应该选择黑色还是白色</span>
	  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">rank</span> <span class="o">*</span> <span class="n">width</span> <span class="o">/</span> <span class="n">ranks</span><span class="o">;</span>
	  <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">line</span> <span class="o">*</span> <span class="n">height</span> <span class="o">/</span> <span class="n">lines</span><span class="o">;</span>
	  <span class="kt">int</span> <span class="n">black</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	  <span class="kt">int</span> <span class="n">white</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	  <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="n">ranks</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">width</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span>
	    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="n">lines</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">height</span><span class="o">;</span> <span class="o">++</span><span class="n">j</span><span class="o">){</span>
	      <span class="k">if</span><span class="o">(</span><span class="n">image</span><span class="o">.</span><span class="na">getRGB</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">)</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="n">black</span><span class="o">++;</span>
	      <span class="k">else</span> <span class="n">white</span><span class="o">++;</span>
	    <span class="o">}</span>
	  <span class="k">if</span><span class="o">(</span><span class="n">white</span> <span class="o">&lt;=</span> <span class="n">black</span><span class="o">)</span>
	    <span class="n">ans</span> <span class="o">=</span> <span class="n">ans</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">k</span><span class="o">);</span>
	  <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
	<span class="o">}</span>
      <span class="o">}</span>
      <span class="n">g</span><span class="o">.</span><span class="na">dispose</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">ans</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lines</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><p><em>注：代码中有“&lt;&gt;”注释的代码来自一个<a href="http://bbs.csdn.net/topics/390594481">帖子</a></em></p><p>第一步获取像素字的方法可谓简单粗暴，一个格子了黑的多就全涂黑，白的多就全抹白。createImage()方法的效果其实并不是很好，只能依靠设置更大的行数(lines)来弥补。下面这张图的行数是30，n值已经比自指涉的那个n长出一倍：</p><p><img src="/assets/tupper5.png" /></p><p>translateImage()这个方法的效果不错，生成的原本的自指涉公式：</p><p><img src="/assets/tupper6.png" /></p><p>最后，按照Matrix67教的，我发现了一个函数</p><blockquote><p>lines = 30</p><p>n = 1700588472888268386616099055151107898449466865618167050285900960468542510070550603295531262008076593778655726752857952009189287582683506343855996761652624418921380642270818749133295248126528444626652177756015782801108909393833066453966737590118955916237832946837998688814125346884114535839563585674380557033157390711191161262252298646605632005244091016308467189777828038651948144748565265821649377396689499727131791596575029207578753839278182223578330856732779310321233622275648824557927333543050268932249064955918609670005302824643489254418012849456997594230366888919853450399152782431350010426750850595513305806612377128227982913907954345543984500933887768590182246191125121073030646399643723788666062583892353889726370650995025190770300323814544511187508718162523521106939052592139639700356810828408406908408950067508616713653777281938984193281039850266071213490536657412974701161341646115168498734446257226358803692953684933931059272202364422508820447005930030484806216628824934611848543276037919944519596448031976520837068552069481311886982420661403011028827675081062291800881001130125590179590077783746050556387977851206273823345924453346485792316092203264157490951650097510528229247315801862041466935134393189561023114338332186743559193935505120236089076289633627176402439067659646455323772498015308897717981379567143759631859179276049776386054228601049252580878243258003051965187006602458508067200388519473179363843054248002234697297485520223798829546734857559807574944906003497490572107490349592258607775938416702447137191007310422330506295553842736329708500411220438696879908250551501451342420823189042759257807711326709766940381266510710299294416590336659774336421802856185511488693102040421767571457197647012532788760025442876304138356071731864054370031053886185086327881223863046312261747909926443943457076157546429831417483270184775374849786359811656228219685111193045326387567729913087854789686917223172713638744798668060462670749973122791469818840345386092800880045237244587908556715296798447155224952540889516098223823912960</p></blockquote><div class="divider"></div></article><div class="back"> <a href="/">Back</a></div></main></body></html>